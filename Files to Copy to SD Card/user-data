#cloud-config

# This is the user-data configuration file for cloud-init. By default this sets
# up an initial user called "ubuntu" with password "ubuntu", which must be
# changed at first login. However, many additional actions can be initiated on
# first boot from this file. The cloud-init documentation has more details:
#
# https://cloudinit.readthedocs.io/
#
# Some additional examples are provided in comments below the default
# configuration.

# On first boot, set the (default) ubuntu user's password to "ubuntu" and
# expire user passwords
#chpasswd:
#  expire: true
#  list:
#  - ubuntu:ubuntu

hostname: rpi4
manage_etc_hosts: true
locale: en_US.UTF-8
timezone: Asia/Jakarta

# Enable password authentication with the SSH daemon
ssh_pwauth: true

users:
- default
- name: dedyms
  gecos: dedyms
  groups: users dedyms sudo
  sudo: "ALL=(ALL) NOPASSWD:ALL"
  lock_passwd: false
  shell: /bin/bash
  passwd: $6$xfhQ0cNNk1PI/5OL$jwLlg/Mn3OfHqPwkGmcbhbPPaCD7Wrr82RjPhg5fCA2mmBAKqyp.Mh.FZH0Gzcua8jTZftYSRDwC7dFIUScmZ.
  uid: '1000' 

## Add users and groups to the system, and import keys with the ssh-import-id
## utility
groups:
#- robot: [robot]
#- robotics: [robot]
- dedyms:
  gid: '1000' 

bootcmd:
# disable ipv6 on all interfaces
- sysctl net.ipv6.conf.all.disable_ipv6=1

##  Reboot after cloud-init completes because otherwise wlan0 will not come up...
##  despite cloud-init having applied settings from network-config
power_state:
  mode: reboot
